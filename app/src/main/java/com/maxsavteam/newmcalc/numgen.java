package com.maxsavteam.newmcalc;import android.app.AlertDialog;import android.content.BroadcastReceiver;import android.content.Context;import android.content.DialogInterface;import android.content.Intent;import android.content.IntentFilter;import android.content.SharedPreferences;import android.content.pm.ActivityInfo;import android.content.res.ColorStateList;import android.content.res.Resources;import android.graphics.Color;import android.graphics.drawable.ColorDrawable;import android.graphics.drawable.Drawable;import android.os.Build;import android.os.Bundle;import androidx.appcompat.app.ActionBar;import androidx.appcompat.app.AppCompatActivity;import android.preference.PreferenceManager;import android.view.MenuItem;import android.view.View;import android.widget.Button;import android.widget.CheckBox;import android.widget.EditText;import android.widget.ImageButton;import android.widget.ImageView;import android.widget.LinearLayout;import android.widget.Switch;import android.widget.TextView;import android.widget.Toast;import java.math.BigInteger;import java.util.ArrayList;import java.util.concurrent.ThreadLocalRandom;public class numgen extends AppCompatActivity {    int len = 0;    Resources res;    ArrayList<String> s = new ArrayList<>();    //ArrayList<String> def = new ArrayList<>();    String caplets = "MNBVCXZLKJHGFDSAPOIUYTREWQ",            lowercase = "qwertyuiopasdfghjklzxcvbnm",            digits = "0123456789", special = "<$@>",            hyphen = "-",            space = " ",            parentheses = "{[()]}",            underscore = "_";    CheckBox swcap, swlower, swdigi, swhyphen, swpar, swspace, swspecial, swunderscore;    int kol_sw = 3;    Drawable dr;    SharedPreferences sp;    View.OnLongClickListener longclick = new View.OnLongClickListener(){        @Override        public boolean onLongClick(View v){            EditText min = findViewById(R.id.edTextMin);            EditText max = findViewById(R.id.edTextMax);            min.setText("");            max.setText("");            return true;        }    };    String start_type;    boolean DarkMode;    @Override    protected void onCreate(Bundle savedInstanceState) {        sp = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());        DarkMode = sp.getBoolean("dark_mode", false);        if(DarkMode)            setTheme(android.R.style.Theme_Material_NoActionBar);        else            setTheme(R.style.AppTheme);        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_numgen);        res = getResources();        ActionBar appActionBar = getSupportActionBar();        if(DarkMode){            getWindow().setBackgroundDrawableResource(R.drawable.black);            TextView t = findViewById(R.id.textView);            t.setTextColor(getResources().getColor(R.color.white));            t = findViewById(R.id.txtFrom);            t.setTextColor(getResources().getColor(R.color.white));            t = findViewById(R.id.textView4);            t.setTextColor(getResources().getColor(R.color.white));            t = findViewById(R.id.txtAnswer);            t.setTextColor(getResources().getColor(R.color.white));            EditText ed = findViewById(R.id.edTextMax);            ed.setTextColor(getResources().getColor(R.color.white));            ed = findViewById(R.id.edTextMin);            ed.setTextColor(getResources().getColor(R.color.white));            ImageView img = findViewById(R.id.btnCopy);            img.setImageDrawable(getResources().getDrawable(R.drawable.copy_dark));	        appActionBar.setHomeAsUpIndicator(R.drawable.left_arrow_for_black);	        appActionBar.setBackgroundDrawable(getDrawable(R.drawable.black));        }else {	        getWindow().setBackgroundDrawableResource(R.drawable.white);	        appActionBar.setHomeAsUpIndicator(R.drawable.left_arrow_for_light);	        appActionBar.setBackgroundDrawable(getDrawable(R.drawable.white));        }        try{            getSupportActionBar().setDisplayHomeAsUpEnabled(true);            getSupportActionBar().setTitle(R.string.randomgen);            getSupportActionBar().setElevation(0);            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);        }catch(Exception e){            Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();            finish();        }        Intent intent = getIntent();        start_type = intent.getStringExtra("start_type");        if(intent.getStringExtra("type").equals("pass")){            if(DarkMode)                setTheme(android.R.style.Theme_Material_NoActionBar);            else                setTheme(R.style.AppTheme);            setContentView(R.layout.numgen_passgen);            swcap = findViewById(R.id.swCap);            swdigi = findViewById(R.id.swDigits);            swhyphen = findViewById(R.id.swHyphen);            swlower = findViewById(R.id.swLowerCase);            swpar = findViewById(R.id.swPar);            swspace = findViewById(R.id.swSpace);            swspecial = findViewById(R.id.swSpecial);            swunderscore = findViewById(R.id.swUnderScore);            String[] strarr = res.getStringArray(R.array.switches);            swunderscore.setText(strarr[4]);            int length = swunderscore.getWidth();            swcap.setText(strarr[0]);            swcap.setBackgroundTintList(ColorStateList.valueOf(res.getColor(R.color.colorAccent)));            //swcap.setWidth(length);            swlower.setText(strarr[1]);            swlower.setBackgroundTintList(ColorStateList.valueOf(res.getColor(R.color.colorAccent)));            //swlower.setWidth(length);            swdigi.setText(strarr[2]);            swdigi.setBackgroundTintList(ColorStateList.valueOf(res.getColor(R.color.colorAccent)));            //swdigi.setWidth(length);            swhyphen.setText(strarr[3]);            swhyphen.setBackgroundTintList(ColorStateList.valueOf(res.getColor(R.color.colorAccent)));            //swhyphen.setWidth(length);            swspace.setText(strarr[5]);            swspace.setBackgroundTintList(ColorStateList.valueOf(res.getColor(R.color.colorAccent)));            //swspace.setWidth(length);            swspecial.setText(strarr[6]);            swspecial.setBackgroundTintList(ColorStateList.valueOf(res.getColor(R.color.colorAccent)));            //swspecial.setWidth(length);            swpar.setText(strarr[7]);            swpar.setBackgroundTintList(ColorStateList.valueOf(res.getColor(R.color.colorAccent)));            //swpar.setWidth(length);            //length = Integer.max(swcap.getWidth(), swdigi.getWidth());            if(DarkMode) {                ImageView img = findViewById(R.id.btnCopyPass);                img.setImageDrawable(getResources().getDrawable(R.drawable.copy_dark));                TextView txt = findViewById(R.id.txtGenedPass);                txt.setTextColor(getResources().getColor(R.color.white));            }            /*if(DarkMode)                c.setTextColor(getResources().getColor(R.color.white));*/            try{                getSupportActionBar().setTitle(R.string.passgen);            }catch(Exception e){                Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();                finish();            }            setbackground();            btnonclick(findViewById(R.id.btnPass8));        }        //b.setOnLongClickListener(longclick);*/    }    protected void setbackground(){        ArrayList<Button> b = new ArrayList<>();        b.add(findViewById(R.id.btnPass6));        b.add(findViewById(R.id.btnPass8));        b.add(findViewById(R.id.btnPass12));        b.add(findViewById(R.id.btnPass16));        int col, bg;        if(DarkMode){            bg = getResources().getColor(R.color.black);            col = getResources().getColor(R.color.white);        }else{            bg = getResources().getColor(R.color.white);            col = getResources().getColor(R.color.black);        }        for(int i = 0; i < b.size(); i++){            b.get(i).setBackgroundColor(bg);            b.get(i).setTextColor(col);        }    }    public void onSwClick(View v){        CheckBox sw = (CheckBox) v;        if(sw.isChecked()){            kol_sw++;        }else            kol_sw--;    }    /*public void checkbox(View v){        CheckBox ch = findViewById(R.id.checkBox);        TextView tx = findViewById(R.id.add_chars);        String x = "<>_.&%-?$^!=[]{}()@";        tx.setText(x);        tx.setTextColor(getResources().getColor(R.color.white));        if(ch.isChecked()){            tx.setVisibility(View.VISIBLE);            for(int i = 0; i < x.length(); i++){                s.add(Character.toString(x.charAt(i)));            }        }        else{            tx.setVisibility(View.INVISIBLE);            int sz = s.size();            for(int i = 0; i < x.length(); i++){                s.remove(s.size() - 1);            }        }    }*/    protected void exit_activity(){        finish();        overridePendingTransition(R.anim.activity_in1, R.anim.activity_out1);    }    public void btnonclick(View v){        Button btn = findViewById(v.getId());        setbackground();        if(DarkMode){            btn.setTextColor(getResources().getColor(R.color.black));            btn.setBackgroundColor(getResources().getColor(R.color.white));        }else {            btn.setTextColor(getResources().getColor(R.color.white));            btn.setBackgroundColor(getResources().getColor(R.color.black));        }        len = Integer.valueOf(btn.getText().toString());    }    public void genpass(View v){        if(len != 0){            if(kol_sw != 0){                String resource_str = "";                //Switch swcap, swlower, swdigi, swhyphen, swpar, swspace, swspecial;                if(swcap.isChecked())                    resource_str += caplets;                if(swlower.isChecked())                    resource_str += lowercase;                if(swdigi.isChecked())                    resource_str += digits;                if(swhyphen.isChecked())                    resource_str += hyphen;                if(swpar.isChecked())                    resource_str += parentheses;                if(swspace.isChecked())                    resource_str += space;                if(swspecial.isChecked())                    resource_str += special;                if(swunderscore.isChecked())                    resource_str += "_";                String pass = "";                for(int i = 0, a; i < len; i++){                    a = ThreadLocalRandom.current().nextInt(0, resource_str.length());                    pass += resource_str.charAt(a);                }                findViewById(R.id.btnCopyPass).setVisibility(View.VISIBLE);                TextView t = findViewById(R.id.txtGenedPass);                t.setText(pass);            }else{                Toast.makeText(getApplicationContext(), res.getString(R.string.pass_sw_all_off), Toast.LENGTH_LONG).show();            }        }    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        int id = item.getItemId();        //Toast.makeText(getApplicationContext(), Integer.toString(id) + " " + Integer.toString(R.id.home), Toast.LENGTH_SHORT).show();        if(id == android.R.id.home){            exit_activity();        }        return super.onOptionsItemSelected(item);    }    public void generate(View v){        EditText minInput = findViewById(R.id.edTextMin);        EditText maxInput = findViewById(R.id.edTextMax);        String maxs = maxInput.getText().toString();        String mins = minInput.getText().toString();        if(!minInput.getText().toString().equals("") && !maxInput.getText().toString().equals("")){            BigInteger b1 = new BigInteger(mins);            BigInteger b2 = new BigInteger(maxs), lmax = BigInteger.valueOf(Long.MAX_VALUE), lmin = BigInteger.valueOf(Long.MIN_VALUE);            if(b1.compareTo(lmin) < 0 || b1.compareTo(lmax) > 0 || b2.compareTo(lmin) < 0 || b2.compareTo(lmax) > 0){                Toast.makeText(getApplicationContext(), getResources().getString(R.string.maxintexception), Toast.LENGTH_LONG).show();                return;            }            Long minNum = Long.valueOf(minInput.getText().toString());            Long maxNum = Long.valueOf(maxInput.getText().toString());            if(minNum > maxNum){                Long temp = minNum;                minNum = maxNum;                maxNum = temp;            }            long randomNum = ThreadLocalRandom.current().nextLong(minNum, maxNum + 1);            TextView t = findViewById(R.id.txtAnswer);            t.setText(Long.toString(randomNum));            findViewById(R.id.layoutLinear).setVisibility(LinearLayout.VISIBLE);        }    }    public void copy(View v){        android.text.ClipboardManager clipboard = (android.text.ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);        TextView t;        if(v.getId() == R.id.btnCopyPass){            t = findViewById(R.id.txtGenedPass);        }else            t = findViewById(R.id.txtAnswer);        clipboard.setText(t.getText().toString());        Toast.makeText(getApplicationContext(), getResources().getString(R.string.copied), Toast.LENGTH_SHORT).show();    }    @Override    public void onBackPressed(){        //super.onBackPressed();        if(start_type.equals("shortcut")) {            startActivity(new Intent(this, MainActivity.class));            exit_activity();        }else if(start_type.equals("app")){            exit_activity();        }    }}